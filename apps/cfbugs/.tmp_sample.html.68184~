<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"> 
	<head><script type="text/javascript" src="/cf-scripts/cfform.js"></script>
<script type="text/javascript" src="/cf-scripts/masks.js"></script>
 
		<meta charset="utf-8"> 
		
			
			
			
		
		
			<meta name="description" content="Bug#3318104 - Service Temporarily Unavailable after arbitrary amount of time + heavy usage" />
			<title>Bug#3318104 - Service Temporarily Unavailable after arbitrary amount of time + heavy usage</title>
		
		<link rel="stylesheet" href="style.css" media="screen" type="text/css" charset="utf-8">
<!--[if lt IE 9]>
		<link rel="stylesheet" href="ie.css" type="text/css" charset="utf-8">
<![endif]-->

		<script language="JavaScript" type="text/javascript">
			
			function toggleCollapse(divName, buttonName)
			{
				var style = new String();
				style = document.getElementById(divName).style.display;
				if (style.toLowerCase()=="block" || style == "") {
					document.getElementById(divName).style.display = "none";
					document.getElementById(buttonName).setAttribute("class", "btn ico ui-icon ui-icon-plus")
				} else {
					document.getElementById(divName).style.display = "block";
					document.getElementById(buttonName).setAttribute("class", "btn ico ui-icon ui-icon-minus");
				}
			
			}
		
		</script>

	<script type="text/javascript">
<!--
    _CF_submit_status["CFForm_1"]=null;
    _CF_checkCFForm_1 = function(_CF_this)
    {
        //return false if form submit button has already been pressed once
        if( _CF_submit_status[_CF_this.name] == "submitting" ) return false;
        //reset on submit
        _CF_submit_status[_CF_this.name] = "submitting";
        _CF_error_exists = false;
        _CF_error_messages = new Array();
        _CF_error_fields = new Object();
        _CF_FirstErrorField = null;


        //display error messages and return success
        if( _CF_error_exists )
        {
            if( _CF_error_messages.length > 0 )
            {
                // show alert() message
                _CF_onErrorAlert(_CF_error_messages);
                // set focus to first form error, if the field supports js focus().
                if( _CF_this[_CF_FirstErrorField].type == "text" )
                { _CF_this[_CF_FirstErrorField].focus(); }

                _CF_submit_status[_CF_this.name] = null;
            }
            return false;
        }else {
            return true;
        }
    }
//-->
</script>
<script type="text/javascript">
<!--
    _CF_submit_status["CFForm_2"]=null;
    _CF_checkCFForm_2 = function(_CF_this)
    {
        //return false if form submit button has already been pressed once
        if( _CF_submit_status[_CF_this.name] == "submitting" ) return false;
        //reset on submit
        _CF_submit_status[_CF_this.name] = "submitting";
        _CF_error_exists = false;
        _CF_error_messages = new Array();
        _CF_error_fields = new Object();
        _CF_FirstErrorField = null;


        //display error messages and return success
        if( _CF_error_exists )
        {
            if( _CF_error_messages.length > 0 )
            {
                // show alert() message
                _CF_onErrorAlert(_CF_error_messages);
                // set focus to first form error, if the field supports js focus().
                if( _CF_this[_CF_FirstErrorField].type == "text" )
                { _CF_this[_CF_FirstErrorField].focus(); }

                _CF_submit_status[_CF_this.name] = null;
            }
            return false;
        }else {
            return true;
        }
    }
//-->
</script>
</head> 
	<body>

		<div class="nav">
			<div class="column grid_2">
		    </div>
			<div id="mainmenu" class="row"> 
	      		<div class="column grid_2">
	      			<a href="http://www.adobe.com" class="adbe_logo" tabindex="1">
	      				<img src="images/adobeLogo.png" alt="Adobe">
					</a>
				</div>
				<div class="column grid_10 tright">  
					
						
							<span>Adam Cameron.</span> 
							<span>|</span>
							<a tabindex=2 href="?event=userPreferences">Preferences</a>
							<span>|</span>
							<a tabindex=3 href="http://www.adobe.com/cfusion/membership/logout.cfm?returnUrl=https%3A%2F%2Fbugbase%2Eadobe%2Ecom%2Findex%2Ecfm" style="padding-right: 0px;">Log Out</a>
						
					
				</div> 
	    	</div>
	    </div>
        <div id="container">
			<header id="header">
				<div class="row"></div>
			</header>
			<div id="section">
				<div class="row project">
					<div class="column grid_12">
						<ul class="ui-tab">
							<li	>
								<a id="homeNav" tabindex=5 href="?event=home" class="ico-l"><b class="ui-icon ui-icon-home"></b> <span>Home</span></a>
							</li>
							<li	>
								<a id="searchNav" tabindex=6 href="?event=search" class="ico-l"><b class="ui-icon ui-icon-search"></b> <span>Search</span></a>
							</li>
							<li	>
								<a id="newBugNav" tabindex=7 href="?event=newBug" class="ico-l"><b class="ui-icon ui-icon-plus"></b> <span>Add Bug</span></a>
							</li>
							<li	>
								<a id="newFeatureNav" tabindex=8 href="?event=newFeature" class="ico-l"><b class="ui-icon ui-icon-lightbulb"></b> <span>New Feature</span></a>
							</li>
						</ul>
						<form name="quickSearch" action="index.cfm" method="get">
							<input type="hidden" name="event" value="bug" />						
											
							<div id="search_row" style="width:100%;" >
								<div style="float:right">
									<input name="id" type="text" maxlength="7" tabindex=10  />
									<input tabindex=11 id="bugIdSearchBtn" style="float:none;" type="submit" value="Find Bug/Feature ID"/>
								</div>
							</div>	
						</form>
					</div>
				</div>
				<div class="row base"><script language="JavaScript" type="text/javascript">
	function clearFileInput(){
	   var oldInput = document.getElementById("fileControl");
	   var newInput = document.createElement("input");
	    
	   newInput.type = "file";
	   newInput.id = oldInput.id;
	   newInput.name = oldInput.name;
	   newInput.size = oldInput.size;
	   newInput.tabindex = oldInput.tabindex;
	   newInput.style.cssText = oldInput.style.cssText;
	    
	   oldInput.parentNode.replaceChild(newInput, oldInput);
	}
</script>


<div class="column grid_12 pad">
	<h1 class="title">
	ColdFusion  10.0
	
		&nbsp;-&nbsp;&nbsp;Bug 
	
	3318104
	</h1>
	<div class="actions">
    	Created on Sunday, August 26, 2012 
    </div>
	<div class="content">
		
		<div class="row dual">
			<div class="column grid_8">
				<h2>Title</h2>
				<p>
					 Service Temporarily Unavailable after arbitrary amount of time + heavy usage 
				</p>
                <h2>Description</h2>
				<p>
					 Problem Description: <br/><br/>The problem is described in detail in this thread:<br/><br/>http://forums.adobe.com/message/4649986#4649986<br/><br/>CF 10 under Windows 2008 x64 and IIS7 will periodically start serving up the following messages:<br/><br/>The server is temporarily unable to service your request due to maintenance downtime or capacity problems. Please try again later.<br/><br/>Jakarta/ISAPI/isapi_redirector/1.2.32 ()<br/><br/>Restarting the web publishing service causes the problem to go away. <br/><br/>Steps to Reproduce: Cannot reproduce on demand. Happens every 1-4 weeks on a server with 14 or so CF applications and several thousand active users.<br/><br/>Actual Result:<br/><br/>Expected Result:<br/><br/>Any Workarounds: 
				</p>
                <h2>Test Configuration</h2>
				<p>
					 My Hardware and Environment details: Win 2008 Server x64 (Web or Enterprise edition), 8 GB RAM, CF10 Standard 
				</p>
                <table class="styledTable">
					<tbody>
						<tr>
							<th id="tblRowHdr2" style="width:200px">App Language(s)</th>
							<td headers="tblColHdr2 tblRowHdr2" style="width:80%">
							 English 
							</td>
						</tr>
						<tr class="even">
							<th id="tblRowHdr3">OS Language(s)</th>
							<td headers="tblColHdr2 tblRowHdr3">
							 English 
							</td>
						</tr>			
						<tr>
							<th id="tblRowHdr4">Platform(s)</th>
							<td headers="tblColHdr2 tblRowHdr4">
							 Win 2008 Server R2 64 bit 
							</td>
						</tr>
						<tr class="even">
							<th id="tblRowHdr5">Browser(s)</th>
							<td headers="tblColHdr2 tblRowHdr5">
							 Browsers All 
							</td>
						</tr>
					</tbody>
				</table>
				
					<div class="row reply">
						
							<div class="column grid_1 tcenter">
								<p class="gravatar" title="Adam Cameron.">
									Adam Cameron.
								</p>
							</div>
							<div class="column grid_8">
								<form name="CFForm_1" id="CFForm_1" action="/index.cfm?event=bug&amp;id=3318104" method="post" onsubmit="return _CF_checkCFForm_1(this)">
									<input id="addNoteEventHidden" type="hidden" name="event" value="addNote" >
									<input id="addNoteBugIDHidden" type="hidden" name="id" value="3318104" >
									<textarea id="noteBodyControl" name="noteBody"></textarea>
									<span class="arw"><span></span></span><br>
									<input name="addNoteButton" id="addNoteButton"  type="submit" value="Add Note" />
								</form>

							</div>
						
					</div>
					<br/>
					<br/>
					<br/>
				
			<div id="comment">
				<h2 class="fleft">Notes (4) </h2>
				
				
				<ul>
					<li>
						<div class="row">
							<div class="column grid_1 tcenter">
								
								<p class="gravatar" title="Kiran Sakhare">
									Kiran Sakhare
								</p>
								<p>
								4:34:51 AM PDT Aug 31, 2012
								</p>
								
							</div>
							<div class="column grid_comment">
								<p>
									We also need some information on server setup. <br/>1. How many sites in the IIS are configured with CF<br/>2. Have you tried giving the timeout value in wsconfig-&gt;advanced option.<br/>3. Enable the cachewebserverpath option in the server admin settings page and verify if you can repro the issue.<br/>4. Give us server load information about number of request at normal and peak time.
								</p>
							</div>
						</div>
	                </li>																		
				</ul>
				
				<ul>
					<li>
						<div class="row">
							<div class="column grid_1 tcenter">
								
								<p class="gravatar" title="Evelin Varghese">
									Evelin Varghese
								</p>
								<p>
								10:36:31 PM PDT Aug 29, 2012
								</p>
								
							</div>
							<div class="column grid_comment">
								<p>
									We are trying to reproduce this issue. Any Sample code that reproduces  the issue will be really helpful. <br/>We can simulate continuous http request firing to replicate the issue.
								</p>
							</div>
						</div>
	                </li>																		
				</ul>
				
				<ul>
					<li>
						<div class="row">
							<div class="column grid_1 tcenter">
								
								<p class="gravatar" title="AlHolden">
									AlHolden
								</p>
								<p>
								11:43:40 AM PDT Aug 29, 2012
								</p>
								
							</div>
							<div class="column grid_comment">
								<p>
									coldfusion-error.log fills up with ~5mb of these entries on each occurance:<br/>Aug 29, 2012 11:24:58 AM org.apache.coyote.ajp.AjpProcessor getRealPathFromServer<br/>SEVERE: Error in getRealPathFromConn<br/>java.net.SocketException: Connection reset by peer: socket write error<br/>	at java.net.SocketOutputStream.socketWrite0(Native Method)<br/>	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)<br/>	at java.net.SocketOutputStream.write(SocketOutputStream.java:124)<br/>	at org.apache.coyote.ajp.AjpProcessor.getRealPathFromServer(AjpProcessor.java:391)<br/>	at org.apache.coyote.ajp.AbstractAjpProcessor.getRealPath(AbstractAjpProcessor.java:1112)<br/>	at org.apache.naming.resources.FileDirContext.doGetRealPath(FileDirContext.java:198)<br/>	at org.apache.naming.resources.BaseDirContext.getRealPath(BaseDirContext.java:412)
								</p>
							</div>
						</div>
	                </li>																		
				</ul>
				
				<ul>
					<li>
						<div class="row">
							<div class="column grid_1 tcenter">
								
								<p class="gravatar" title="@bittersweetryan">
									@bittersweetryan
								</p>
								<p>
								11:23:04 AM PDT Aug 29, 2012
								</p>
								
							</div>
							<div class="column grid_comment">
								<p>
									This happens to me when I have a http request with a large paylod in the content, for instance doing a HTML5 XMLHTTPRequest with a file in the request. 
								</p>
							</div>
						</div>
	                </li>																		
				</ul>
				
			</div>
		</div>
			<div class="column grid_4 fright">
            	<div class="listed">
            		 
						
						<b>Duplicate ID</b>
						   
						
					
				</div>
				<div class="listed last">	
					<b>Reported By</b>
					 Aquitaine 
				</div> 
            	<div class="clip">
					<h3>Status</h3>
					<div class="listed small">	
						<b>State</b>
						 Open 
					</div>
					<div class="listed small">	
						<b>Status</b>
						 ToTrack 
					</div>
					<div class="listed last small">	
						<b>Reason</b>
						 PRNeedInfo 
					</div>
				</div>
                <div class="clip">
					<h3>Importance</h3>
					<div class="listed">	
						<b>Priority</b>
						 0-Unknown 
					</div>
					<div class="listed">	
						<b>Frequency</b>
						 Unknown 
					</div>
					<div class="listed">	
						<b>Failure Type</b>
						 Crash 
					</div>
                    <div class="listed last">	
						<b>Product Area</b>
						 Web Container (Tomcat) 
					</div>
				</div>
                <div class="clip">
					<h3>Build</h3>
					<div class="listed large">	
						<table style="width:100%">
							<tr>
								<td style="width:100px">
								<b>Found In Build</b>
								</td>
								<td>
								 Final 
								</td>
							</tr>
						</table>
					</div>
					<div class="listed last large">	
						<table style="width:100%">
							<tr>
								<td style="width:100px">
								<b>Fixed In Build</b>
								</td>
								<td>
								   
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div class="clip">
					
					
					<h3>Attachments (0)</h3>
					
						 
							<div class="listed last">
							
								<small>Do not attach any confidential or proprietary information. The maximum upload size is 100MB. See <a id="fileFAQ" href="docs/AdobeBugbaseFAQ.pdf" target="_blank">FAQ</a> for more details. </small>
								<br/>
								<form name="CFForm_2" id="CFForm_2" action="/index.cfm?event=bug&amp;id=3318104" method="post" enctype="multipart/form-data" onsubmit="return _CF_checkCFForm_2(this)">
									<input type="hidden" name="event" value="file.upload"/>
									<input type="hidden" name="id" value="3318104" >
									<input style="margin: 8px 4px 10px 0px;" size="18" id="fileControl" type="file" name="uploadedFile">
									<input name="uploadFileBtn" type="submit" value="Attach" style="float:none; font-size:1.1em; margin: 0"  id="uploadFileBtn"  />
									<a title="Clear File Attachment" href="javascript:clearFileInput()" class="ico-l" style="padding-right: 0px; padding-left: 0px;"><b style="padding: 0px; width: 16px;" class="ui-icon ui-icon-cancel"></b></a>
								</form>

							</div>
					
					
					
					
				</div>
				<div id="votes">
					<h2 class="fleft">Votes (8) </h2>
					
						
							
							<form method="post" action="/index.cfm?event=bug&amp;id=3318104">
								<input type="hidden" name="event" value="myVote" >
								<input type="hidden" name="id" value="3318104" >
								<input type="hidden" name="product" value="ColdFusion" >
								<input type="hidden" name="version" value="10.0" >
								<input type="hidden" name="title" value="Service Temporarily Unavailable after arbitrary amount of time + heavy usage" >
								<input type="hidden" name="severity" value="4" >
								<input id="voteButton" type="submit" name="My Vote" value="MyVote" tabindex="15">
							</form>
							
						
					
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="Dmitry Yakhnov">Dmitry Yakhnov</p>
											<p>6:29:18 PM PDT Aug 30, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="Same problem at Hostek with CF10.">
										Same problem at Hostek with CF10.
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="Miguel-F">Miguel-F</p>
											<p>1:38:43 PM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="I, like Adam, am not personally having this issue because I have not upgraded to CF10 yet (still running CF9) but I am hearing lots of other people with similar issues.  For what it's worth here is another forum discussion regarding this: http://forums.adobe.com/message/4657976#4657976">
										I, like Adam, am not personally having this issue because I have not upgraded to CF10 yet (still running CF9) but I am hearing lots of other people with similar issues.  For what it's worth here is another forum discussion regarding this: http://forums.adobe.com/message/4657976#4657976
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="Adam Cameron.">Adam Cameron.</p>
											<p>1:24:35 PM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="I'm not having this problem (I don't run Win2k8), but I've heard enough of it happening that it seriously needs looking at.<br/><br/>-- <br/>Adam">
										I'm not having this problem (I don't run Win2k8), but I've heard enough of it happening that it seriously needs looking at.<br/><br/>-- <br/>Adam
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="Peter@csc">Peter@csc</p>
											<p>12:38:33 PM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="We are seeing server hangs on CF10 that may be related to this.">
										We are seeing server hangs on CF10 that may be related to this.
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="AlHolden">AlHolden</p>
											<p>11:45:15 AM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="breaks when calling flash forms which perform data loads from components on init">
										breaks when calling flash forms which perform data loads from components on init
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="lg84">lg84</p>
											<p>11:25:45 AM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="We were live on Coldfusion 10 Standard Edition on 2 Windows Server 2008 VM (32 bit)  for almost a week. Last night, both servers stopped responding at the same time. When a server was restarted, it would run ok initially on restart but then would lock up within the next 10 minutes. IIS logs show increased traffic from bots during that time.  We had to revert back to Coldfusion 9.">
										We were live on Coldfusion 10 Standard Edition on 2 Windows Server 2008 VM (32 bit)  for almost a week. Last night, both servers stopped responding at the same time. When a server was restarted, it would run ok initially on restart but then would lock up within the next 10 minutes. IIS logs show increased traffic from bots during that time.  We had to revert back to Coldfusion 9.
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="@bittersweetryan">@bittersweetryan</p>
											<p>11:19:44 AM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="This is happening to me as well, under a small testing load.  It's holding up a large state project from going into production.  ">
										This is happening to me as well, under a small testing load.  It's holding up a large state project from going into production.  
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
						<ul>
							<li>
								<div class="row">
									
									<div class="column grid_1 tcenter" >
											<p class="gravatar" title="klevenson">klevenson</p>
											<p>10:59:52 AM PDT Aug 29, 2012</p>
									</div>
									
									<div class="column grid_votes">
										
										<p title="We have 5 server with CF10 Enterprise that exhibit this same behavior.   Within 2 hours of heaver traffic, a buffer overflow error is registered in the isapi_redirect.dll">
										We have 5 server with CF10 Enterprise that exhibit this same behavior.   Within 2 hours of heaver traffic, a buffer overflow error is registered in the isapi_redirect.dll
										</p>
										
									</div>
								</div>
							</li>																		
						</ul>
					
				</div>			
			</div>

		</div>
		
				
	</div>
</div></div>		
			</div> 
			<div id="footer" class="row">
		  		<div class="column grid_6"> 
		  			<a id="faq" href="docs/AdobeBugbaseFAQ.pdf" target="_blank">FAQ</a> <a id="copyright" href="http://www.adobe.com/misc/copyright.html" target="_blank" >Terms of Use</a> <a id="termsOfUse" href="http://www.adobe.com/misc/privacy.html" target="_blank" >Online Privacy Policy</a> 
		  		</div> 
			  <div class="column grid_6 tright"> 
			  	Copyright &copy; 2011 Adobe Systems Incorporated. All rights reserved.
			  </div> 
			</div>
		</div> 
	</body> 
</html>